UserParameter=psql.numbackends,sh -c 'psql -d postgres -t -c "select sum(numbackends) from pg_stat_database" || echo 0'
UserParameter=psql.version,psql -d postgres -t -c "select version()"
UserParameter=psql.config[*],psql -d postgres -t -c "select current_setting('$1')"
UserParameter=psql.db.discovery,psql -d postgres -t -c "select '{\"data\":[' || array_to_string(array(select '{\"{#DBNAME}\":\"' || datname || '\"}' from pg_database), ',') || ']}'"
UserParameter=psql.dbstat[*],psql -d postgres -t -c "select sum($1) from pg_stat_database where (datname='$2' or '$2'='')"
UserParameter=psql.dbsize[*],psql -d postgres -t -c "select pg_database_size('$1')"
UserParameter=psql.oldest.xact[*],psql -d postgres -t -c "select coalesce(extract(epoch from now()-min(xact_start)),0) from pg_stat_activity where (datname='$1' or '$1'='') and xact_start<now()"
UserParameter=psql.oldest.query[*],psql -d postgres -t -c "select coalesce(extract(epoch from now()-min(query_start)),0) from pg_stat_activity where (datname='$1' or '$1'='') and query_start<now() and xact_start is not null"
